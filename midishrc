# Generales
tap start # hace que qmidiarp no pierda sync
t 120
#setunit 96

# Carga
#import "reserva/output.mid"

# Dispositivos
dnew 1 "Origin49" ro
dnew 2 "qmidiarp:1" ro

dnew 3 "qmidiarp:0" wo
dnew 4 "FLUID Synth (fluidsynthmidi)" wo
dnew 5 "ZynAddSubFX" wo 

dmmctx {}
dclktx {3}

# Inputs
inew teclado {1 0} 
inew from_seq {2 0} 
inew from_arp {2 1} 
inew from_lfo {2 2} 
#ci origin

# Outputs 
#onew brass  {1 3} 
onew to_seq  {3 0} 
onew to_arp  {3 1} 
onew to_lfo  {3 2} 
onew to_flu  {4 0} 
onew drums   {4 9} 
onew to_pad  {5 10} 
onew to_lead {5 11} 
#co drums 


# Filtros
fnew teclado_drums
fmap { any teclado } { any drums }
fnew teclado_zynadd
fmap { any teclado } { any to_pad }
fnew teclado_seq
fmap { any teclado } { any to_seq }
fnew teclado_arp
fmap { any teclado } { any to_arp }

fnew arp
#fnew arp_pad
fmap { any teclado }  { any to_arp }
fmap { any from_arp } { any to_pad }
#fnew seq_lead
fmap { any from_lfo } { any to_lead }
fmap { any from_seq } { any to_lead }

#cf teclado_drums
cf arp

# Runnn 
i
p

# Test
#oaddev {non  drums 64 100}
#oaddev {noff drums 64 100}

# To do:
# [ ] - Stopear QMidiArp Â¿usando eventos y msg custom?

# Reserva
#dclkrate 1 96

#dnew 1 "129:0" wo 
#dnew 0 "14:0" rw
#dnew 3 "129:1" ro

