# Generales
tap start # hace que qmidiarp no pierda sync
t 120
#setunit 96

# Dispositivos
dnew 0 "Origin49" ro
dnew 1 "qmidiarp:1" ro

dnew 2 "qmidiarp:0" wo
dnew 3 "FLUID Synth (fluidsynthmidi)" wo
dnew 4 "ZynAddSubFX" wo 

# Inputs
inew origin {0 0} 
inew from_seq {1 0} 
inew from_arp {1 1} 
inew from_lfo {1 2} 
#ci origin

# Outputs 
#onew brass  {1 3} 
onew to_seq  {2 0} 
onew to_arp  {2 1} 
onew to_lfo  {2 2} 
onew to_flu  {3 0} 
onew to_pad  {4 10} 
onew to_lead {4 11} 
onew drums   {3 9} 
#co drums 

# Carga
#import "reserva/output.mid"

# Filtros
fnew origin_drums
fmap { any origin } { any drums }
fnew oringin_zynadd
fmap { any origin } { any to_pad }
fnew oringin_seq
fmap { any origin } { any to_seq }
fnew oringin_arp
fmap { any origin } { any to_arp }

fnew arp
#fnew arp_pad
fmap { any origin } { any to_arp }
fmap { any from_arp } { any to_pad }
#fnew seq_lead
fmap { any from_lfo } { any to_lead }
fmap { any from_seq } { any to_lead }

cf origin_drums
cf arp

dmmctx {}
dclktx {2}

# Runnn 
i

# Test
#oaddev {non  drums 64 100}
#oaddev {noff drums 64 100}

# To do:
# [ ] - Stopear QMidiArp Â¿usando eventos y msg custom?

# Reserva
#dclkrate 1 96

#dnew 1 "129:0" wo 
#dnew 0 "14:0" rw
#dnew 3 "129:1" ro

